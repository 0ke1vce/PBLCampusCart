{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adhik\\\\Desktop\\\\main campuscart - Copy\\\\frontend\\\\src\\\\context\\\\AppContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext();\nexport const useApp = () => {\n  _s();\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within AppProvider');\n  }\n  return context;\n};\n_s(useApp, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AppProvider = ({\n  children\n}) => {\n  _s2();\n  const [authToken, setAuthToken] = useState(localStorage.getItem('authToken'));\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cart, setCart] = useState([]);\n  const [currentView, setCurrentView] = useState('login');\n  const [selectedOutlet, setSelectedOutlet] = useState(null);\n  const [selectedStore, setSelectedStore] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [notification, setNotification] = useState(null);\n\n  // Load user and cart from localStorage on mount\n  useEffect(() => {\n    const savedUser = localStorage.getItem('currentUser');\n    if (authToken && savedUser) {\n      try {\n        const user = JSON.parse(savedUser);\n        setCurrentUser(user);\n        setCurrentView(user.user_type === 'student' ? 'outlets' : 'vendor-dashboard');\n      } catch (error) {\n        console.error('Error loading user:', error);\n        logout();\n      }\n    }\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        setCart(JSON.parse(savedCart));\n      } catch (error) {\n        console.error('Error loading cart:', error);\n      }\n    }\n  }, [authToken]);\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }, [cart]);\n  const showNotification = (message, type = 'info') => {\n    setNotification({\n      message,\n      type\n    });\n    setTimeout(() => setNotification(null), 5000);\n  };\n  const apiCall = async (endpoint, options = {}) => {\n    const API_BASE_URL = 'http://localhost:3000/api';\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(authToken && {\n          Authorization: `Bearer ${authToken}`\n        })\n      },\n      ...options\n    };\n    try {\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'API request failed');\n      }\n      return data;\n    } catch (error) {\n      console.error('API Error:', error);\n      throw error;\n    }\n  };\n  const login = async (email, password) => {\n    setLoading(true);\n    try {\n      const data = await apiCall('/auth/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      setAuthToken(data.token);\n      setCurrentUser(data.user);\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('currentUser', JSON.stringify(data.user));\n      showNotification(`Welcome ${data.user.full_name}!`, 'success');\n      setCurrentView(data.user.user_type === 'student' ? 'outlets' : 'vendor-dashboard');\n    } catch (error) {\n      showNotification(error.message || 'Login failed', 'error');\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n  const logout = () => {\n    setAuthToken(null);\n    setCurrentUser(null);\n    setCart([]);\n    setSelectedOutlet(null);\n    setSelectedStore(null);\n    localStorage.clear();\n    setCurrentView('login');\n    showNotification('Logged out successfully', 'info');\n  };\n  const clearCart = () => {\n    setCart([]);\n    localStorage.removeItem('cart');\n  };\n  const value = {\n    authToken,\n    currentUser,\n    cart,\n    setCart,\n    clearCart,\n    currentView,\n    setCurrentView,\n    selectedOutlet,\n    setSelectedOutlet,\n    selectedStore,\n    setSelectedStore,\n    loading,\n    setLoading,\n    notification,\n    showNotification,\n    apiCall,\n    login,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 10\n  }, this);\n};\n_s2(AppProvider, \"lB7N6xIk88Ef8tHHig881DhbWr8=\");\n_c = AppProvider;\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","AppContext","useApp","_s","context","Error","AppProvider","children","_s2","authToken","setAuthToken","localStorage","getItem","currentUser","setCurrentUser","cart","setCart","currentView","setCurrentView","selectedOutlet","setSelectedOutlet","selectedStore","setSelectedStore","loading","setLoading","notification","setNotification","savedUser","user","JSON","parse","user_type","error","console","logout","savedCart","setItem","stringify","showNotification","message","type","setTimeout","apiCall","endpoint","options","API_BASE_URL","config","headers","Authorization","response","fetch","data","json","ok","login","email","password","method","body","token","full_name","clear","clearCart","removeItem","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/adhik/Desktop/main campuscart - Copy/frontend/src/context/AppContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst AppContext = createContext();\r\n\r\nexport const useApp = () => {\r\n  const context = useContext(AppContext);\r\n  if (!context) {\r\n    throw new Error('useApp must be used within AppProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AppProvider = ({ children }) => {\r\n  const [authToken, setAuthToken] = useState(localStorage.getItem('authToken'));\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [cart, setCart] = useState([]);\r\n  const [currentView, setCurrentView] = useState('login');\r\n  const [selectedOutlet, setSelectedOutlet] = useState(null);\r\n  const [selectedStore, setSelectedStore] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [notification, setNotification] = useState(null);\r\n\r\n  // Load user and cart from localStorage on mount\r\n  useEffect(() => {\r\n    const savedUser = localStorage.getItem('currentUser');\r\n    if (authToken && savedUser) {\r\n      try {\r\n        const user = JSON.parse(savedUser);\r\n        setCurrentUser(user);\r\n        setCurrentView(user.user_type === 'student' ? 'outlets' : 'vendor-dashboard');\r\n      } catch (error) {\r\n        console.error('Error loading user:', error);\r\n        logout();\r\n      }\r\n    }\r\n\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) {\r\n      try {\r\n        setCart(JSON.parse(savedCart));\r\n      } catch (error) {\r\n        console.error('Error loading cart:', error);\r\n      }\r\n    }\r\n  }, [authToken]);\r\n\r\n  // Save cart to localStorage whenever it changes\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  const showNotification = (message, type = 'info') => {\r\n    setNotification({ message, type });\r\n    setTimeout(() => setNotification(null), 5000);\r\n  };\r\n\r\n  const apiCall = async (endpoint, options = {}) => {\r\n    const API_BASE_URL = 'http://localhost:3000/api';\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...(authToken && { Authorization: `Bearer ${authToken}` })\r\n      },\r\n      ...options\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'API request failed');\r\n      }\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const login = async (email, password) => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await apiCall('/auth/login', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n      \r\n      setAuthToken(data.token);\r\n      setCurrentUser(data.user);\r\n      localStorage.setItem('authToken', data.token);\r\n      localStorage.setItem('currentUser', JSON.stringify(data.user));\r\n      \r\n      showNotification(`Welcome ${data.user.full_name}!`, 'success');\r\n      setCurrentView(data.user.user_type === 'student' ? 'outlets' : 'vendor-dashboard');\r\n    } catch (error) {\r\n      showNotification(error.message || 'Login failed', 'error');\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setAuthToken(null);\r\n    setCurrentUser(null);\r\n    setCart([]);\r\n    setSelectedOutlet(null);\r\n    setSelectedStore(null);\r\n    localStorage.clear();\r\n    setCurrentView('login');\r\n    showNotification('Logged out successfully', 'info');\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n    localStorage.removeItem('cart');\r\n  };\r\n\r\n  const value = {\r\n    authToken,\r\n    currentUser,\r\n    cart,\r\n    setCart,\r\n    clearCart,\r\n    currentView,\r\n    setCurrentView,\r\n    selectedOutlet,\r\n    setSelectedOutlet,\r\n    selectedStore,\r\n    setSelectedStore,\r\n    loading,\r\n    setLoading,\r\n    notification,\r\n    showNotification,\r\n    apiCall,\r\n    login,\r\n    logout\r\n  };\r\n\r\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\r\n};\r\n\r\nexport default AppContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}